Version 1.0
## Начало

### Установка git в Ubuntu

`sudo apt update && sudo apt install git`

`git --version` *проверка версии*

**получить помощь по командам:**

`git help add *`- полный man по команде*

`git help add -h *`- только опции команды*

`git --help` - *хелп по всем основный командам*

**Работа с репозиторием**

Если создаём новый репозиторий, то:

Переходим в каталог с файлами, которые собираемся отслеживать:

`cd CPP/`

Вводим в терминале для инициализации нового репозитория, который не собираемся публиковать в интернете:

`git init`

Проверяем статус:

`git status`

Сокращённый вывод статуса:

`git status -s`

**Но лучше создать репозиторий на сервисе, например gitlab.com или github.com**

Клонируем созданный в сервисе репозиторий на свой компьютер:

`git clone https://gitlab.com/rurewa/CPP.git`

Представляемся git-системе (укажите свои данные. Это нужно сделать только один раз!):

`git config --global user.email "rurewa@gmail.com"`

`git config --global user.name "rurewa"`

**проверить настройки git-репозиитория (нужно находиться в папке репозитория)**

`git config --list`

Всё, можно обыкновенно работать с этим репозиторием:

`git status или git status -s` *- проверка состояния локального репозитория*

### Работа с файлами

Копируем в эту папку новые файлы:

Добавляем в отслеживание все файлы (звёздочка - это выбрать все файлы):

`git add *`

Коммитим файлы (коммит - фиксация изменений):

`git commit -m "Your message"`

**Обновляем локальный репозиторий с сервера (на случай, если там произошли какие-либо изменения):**

`git pull`

**Загружаем изменения на сервер:**

`git push origin master` *(origin master - это ветка. Её можно не указывать, т.к. по умолчанию используется master/main)*

**Рекомендую сделать привычкой перед коммитом выполнить две команды одновременно**

`git pull && git push`

`git log` *- перечисляет коммиты, сделанные в репозитории в обратном к хронологическом порядке – последние коммиты находятся вверху. Только для текущей ветки.*

`git log -p` *показывает разницу, внесённую в каждый коммит*

`git log --stat -1` *показывает последний коммит (-2, -3 etc)*

`git log -p -2` *показывает изменения последних двух коммитов*

`git log --stat` *показывает краткую информацию об изменениях в коммитах*

`git log --stat -2` *показывает краткую информацию об изменениях двух последних коммитов*

`git log --oneline` *- краткий вывод списка коммитов с короткими хэшами*

`git log --no-merges` *- исключает из вывода коммиты слияния.*

*--no-merges можно применять с другими командами, например:*

`git log -p -2 --no-merges`  *- показывает изменения только в последних двух коммитов без коммистов слияния*

`git log --stat --no-merges` *- показывает краткую информацию об изменениях в коммитах без коммистов слияния*

`git log -S randNums` *- поиск коммитов, которые содержат имя указанной функции (randNums, например)*

`git log --stat -S randNums` *- сочетание 2-х команд: поиск коммитов с определённой функцией и вывод по ним краткой ин-фы.*

`git commit --amend` *- позволяет изменить сообщение последнего коммита*

`git commit -m ‘initial commit’` *- можете выполнить эту команду, если поняли, что сделали коммит рано.*

`git mv` *<имя файла путь_перемещения> - перемещение файла. Git add для коммита уже не требуется.*

`git rm` *<имя файла>*

### Разместить локальный репозиторий, созданные не клонированием в сервисе gitlab.com:

**Пока не знаю!**

### Работа с репозиториями

`git remote -v` *- просмотр всех удалённых репозиториев*

`git remote show origin` *- просмотр информации по удалённому репозиторию. Полезно делать перед любыми изменениями в репозитории.*

----------------------------------------------------------------------------------------------------

### Обновляем локальный репозиторий с сервера:

`git pull`

P.S. pull *- следует выполнять всякий раз перед push! Это избавляет от многих возможных проблем.*

Загружаем изменения на сервер:

`git push origin master`

**Рекомендую сделать привычкой перед коммитом выполнить две команды одновременно**

`git pull && git push`

### Сравнение соммитов

**показать все коммиты:**

`git log --oneline` *- краткий вывод списка коммитов с короткими хэшами*

`git diff` *- До add. Cравнить последный коммит с предыдущим (работает только с подготовленными, но не зафиксированными файлами)*

`git diff` --staged *- После add.*

**Сравнить изменения выбранного хэша:**

`git diff 74a68ce` *- После git push *

**Сравнивать только изменения в файлах (игнорировать новые и удаленные файлы):**

`git diff 74a68ce` --diff-filter=M

**Запустить внешнюю программу сравнений, например meld, если установлена**

`git difftool`

*Удаление файлов или каталогов*

`rm -i, rm -r, rm -rf, rm -irf` *- удаление из индекса средствами bash*

**Удаление файла из индекса возможно только после выполнения команды git add !!!**
`git rm` *- удаление из индекса и с каталога.*

`git rm -f` *- полное удаление файла из каталога и отслеживания git.*

`git mv` *- перенос или переименование файла*

**Отмена**

`git reset` *- отменяет индексацию, но не сами изменения! При этой команде файл не затронут (только индексация git-ом)*

`git restore --staged` <file> *- работает только после git add. Убирает из индекса файл/файлы*

`git commit --amend` *- замена последнего коммита новым. Переписывается только сообщение коммита!*

`git checkout --` <file> *- отмена изменений (последний коммит) в выбранном файле*

`git checkout 3b0ff3b` *- отмена изменений (передвинуть указатель) на выбранный хэш*

`git checkout main` *- возврат к самому младшему коммиту*

### Игнорирование файлов

создать файл .gitignore - после добавления этого файла нужно сделать на него коммит

Примеры, а так же готовые шаблоны под разные задачи можно найти тут:

https://github.com/github/gitignore.git

### Работа с ветками

`git branch` *- просмотр локальных веток*

`git branch --all` *- посмотреть все существующие ветки репозитория, с указанием локальных и удалённых*

`git branch -vv` *- посмотреть состояние всех удалённых веток*

`git branch testing` *- создание новой ветки. В новую ветку копируется всё содержимое текущей.*

`git push --set-upstream origin dev` *- отправка ветки на сервер.*

`git checkout dev` *- переключение на ветку dev*

`git checkout -b testing` *- одновременное создание новой ветки спереключением на неё.*

`git merge dev` *- слияние с веткой dev (Перед этим следует сначала переключиться на ветку, в которую нужно включить коммиты dev)*

`git branch -d testing` *- удаление ветки локального репозитория. Опция -D удаляет даже не слитые ветки.*

`git push origin --delete master`  *- удаление размещённой в интернете ветки.*

`git log --all` *- посмотреть коммиты всех веток репозитория*

`git branch -v` *- посмотреть последние коммиты всех существующих веток репозитория*

`git branch --merged` *- отобразить только те ветки, которые слиты с текущей. Ветки со звёздочкой можно удалять, т.к. они слиты с текущей.*

`git branch --no-merged` *- отобразить только те ветки, которые ещё не слиты с текущей*

`git fetch` *- забирает всё содержимое с удалённого сервера, но не сливает с вашим*

`git log dev` *- показывает лог для указанной ветки*

**Для переименования ветки можно создать новую, переключиться на новую и удалить старую, которую хотели переименовать.**